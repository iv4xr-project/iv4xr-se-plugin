# Adding new block-specific fields

Since the code is polymorphic and everything is static on the code level, we generate the code based on configuration
and source files. All the code is generated by BlockMappingGeneratorRunner, and it generates both the code for C# side
and Kotlin side. It generates classes for Block, BlockDefinitions and their mappings and serializers. Generating blocks
and block definitions are very similar, defining fields and interfaces is the same for both.

Mapping for Block interface is done manually on the C# side and not generated, because we often manually retrieve data
and convert to different structures. Mapping for BlockDefinitions is done automatically, because we expect it to be
simple field passing.

A few tips:

- Commit or stash your changes so that you can easily revert changes in case generated code does not compile.
- If the code doesn't compile after running the generator, find out why, fix, revert the code, then run the generator
  again.

## Base interface

To add new field to the `Block` interface:

- Add field to variable `commonBlockFields` in `BlockMappingGenerator`.
- Run the generator.
- Add field to the Block interface itself.

## Polymorphic blocks

To add or modify polymorphic block type:

- Add/modify a record in `blockMappings` in `BlockSerializer`.
- Run the generator.
